# æ¼”ç¤º setup_analysis_structure å‡½æ•°çš„ä½¿ç”¨
# è¿™ä¸ªå‡½æ•°ç”¨äºåœ¨å½“å‰ç›®å½•åˆ›å»ºæ ‡å‡†åˆ†æç›®å½•ç»“æ„

# åŠ è½½åŒ…
library(MassKitUtils)

# ç¤ºä¾‹1: åŸºæœ¬ä½¿ç”¨
# å‡è®¾ä½ å·²ç»åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼ˆæ¯”å¦‚é€šè¿‡RStudioæˆ–Cursoræ‰“å¼€çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼‰
# åªéœ€è¦åˆ›å»ºæ ‡å‡†çš„å­ç›®å½•ç»“æ„
cat("=== ç¤ºä¾‹1: åŸºæœ¬ä½¿ç”¨ ===\n")
cat("å½“å‰å·¥ä½œç›®å½•:", getwd(), "\n")

# åˆ›å»ºæ ‡å‡†åˆ†æç›®å½•ç»“æ„
setup_analysis_structure()

# ç¤ºä¾‹2: é™é»˜æ¨¡å¼
cat("\n=== ç¤ºä¾‹2: é™é»˜æ¨¡å¼ ===\n")
# å¦‚æœä½ ä¸æƒ³çœ‹åˆ°è¯¦ç»†çš„æ¶ˆæ¯è¾“å‡º
setup_analysis_structure(quiet = TRUE)
cat("é™é»˜æ¨¡å¼ä¸‹åˆ›å»ºå®Œæˆ\n")

# ç¤ºä¾‹3: å¤„ç†å·²å­˜åœ¨çš„ç›®å½•
cat("\n=== ç¤ºä¾‹3: å¤„ç†å·²å­˜åœ¨çš„ç›®å½• ===\n")
# å¦‚æœæŸäº›ç›®å½•å·²ç»å­˜åœ¨ï¼Œé»˜è®¤ä¼šæŠ¥é”™
# ä½†å¯ä»¥ä½¿ç”¨ overwrite = TRUE æ¥è¦†ç›–
tryCatch({
  setup_analysis_structure()
}, error = function(e) {
  cat("é”™è¯¯ä¿¡æ¯:", e$message, "\n")
  cat("ä½¿ç”¨ overwrite = TRUE æ¥è¦†ç›–å·²å­˜åœ¨çš„ç›®å½•\n")
  setup_analysis_structure(overwrite = TRUE)
})

# ç¤ºä¾‹4: æŸ¥çœ‹åˆ›å»ºçš„ç›®å½•ç»“æ„
cat("\n=== ç¤ºä¾‹4: æŸ¥çœ‹åˆ›å»ºçš„ç›®å½•ç»“æ„ ===\n")
cat("å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹:\n")
files <- list.files(recursive = TRUE, include.dirs = TRUE)
for (file in files) {
  if (dir.exists(file)) {
    cat("ğŸ“", file, "\n")
  } else {
    cat("ğŸ“„", file, "\n")
  }
}

# ç¤ºä¾‹5: å®é™…å·¥ä½œæµç¨‹
cat("\n=== ç¤ºä¾‹5: å®é™…å·¥ä½œæµç¨‹ ===\n")
cat("å…¸å‹çš„æ•°æ®åˆ†æé¡¹ç›®å·¥ä½œæµç¨‹:\n")
cat("1. åœ¨RStudioä¸­åˆ›å»ºæ–°é¡¹ç›®æˆ–æ‰“å¼€ç°æœ‰é¡¹ç›®æ–‡ä»¶å¤¹\n")
cat("2. è¿è¡Œ setup_analysis_structure() åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„\n")
cat("3. å¼€å§‹ä½ çš„æ•°æ®åˆ†æå·¥ä½œ\n")
cat("4. å°†æ•°æ®æ–‡ä»¶æ”¾åœ¨ data/raw/ ç›®å½•\n")
cat("5. å°†å¤„ç†åçš„æ•°æ®æ”¾åœ¨ data/processed/ ç›®å½•\n")
cat("6. å°†åˆ†æè„šæœ¬æ”¾åœ¨ scripts/ ç›®å½•\n")
cat("7. å°†è¾“å‡ºç»“æœæ”¾åœ¨ output/ ç›®å½•\n")
cat("8. å°†æ–‡æ¡£æ”¾åœ¨ docs/ ç›®å½•\n")
cat("9. å°†é…ç½®æ–‡ä»¶æ”¾åœ¨ config/ ç›®å½•\n")

cat("\n=== æ€»ç»“ ===\n")
cat("setup_analysis_structure() å‡½æ•°è§£å†³äº†ä»¥ä¸‹é—®é¢˜:\n")
cat("âœ“ ä¸éœ€è¦æŒ‡å®šé¡¹ç›®åç§°ï¼ˆå·²ç»åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼‰\n")
cat("âœ“ ä¸éœ€è¦æŒ‡å®šè·¯å¾„ï¼ˆä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ï¼‰\n")
cat("âœ“ æ›´ç¬¦åˆRStudioå’ŒCursorçš„å®é™…ä½¿ç”¨åœºæ™¯\n")
cat("âœ“ æ”¯æŒè¦†ç›–å·²å­˜åœ¨çš„ç›®å½•\n")
cat("âœ“ æä¾›é™é»˜æ¨¡å¼é€‰é¡¹\n")
cat("âœ“ åˆ›å»ºæ ‡å‡†çš„åˆ†æç›®å½•ç»“æ„\n") 