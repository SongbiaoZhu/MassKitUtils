# 演示 setup_analysis_structure 函数的使用
# 这个函数用于在当前目录创建标准分析目录结构

# 加载包
library(MassKitUtils)

# 示例1: 基本使用
# 假设你已经在项目目录中（比如通过RStudio或Cursor打开的项目文件夹）
# 只需要创建标准的子目录结构
cat("=== 示例1: 基本使用 ===\n")
cat("当前工作目录:", getwd(), "\n")

# 创建标准分析目录结构
setup_analysis_structure()

# 示例2: 静默模式
cat("\n=== 示例2: 静默模式 ===\n")
# 如果你不想看到详细的消息输出
setup_analysis_structure(quiet = TRUE)
cat("静默模式下创建完成\n")

# 示例3: 处理已存在的目录
cat("\n=== 示例3: 处理已存在的目录 ===\n")
# 如果某些目录已经存在，默认会报错
# 但可以使用 overwrite = TRUE 来覆盖
tryCatch({
  setup_analysis_structure()
}, error = function(e) {
  cat("错误信息:", e$message, "\n")
  cat("使用 overwrite = TRUE 来覆盖已存在的目录\n")
  setup_analysis_structure(overwrite = TRUE)
})

# 示例4: 查看创建的目录结构
cat("\n=== 示例4: 查看创建的目录结构 ===\n")
cat("当前目录下的文件和文件夹:\n")
files <- list.files(recursive = TRUE, include.dirs = TRUE)
for (file in files) {
  if (dir.exists(file)) {
    cat("📁", file, "\n")
  } else {
    cat("📄", file, "\n")
  }
}

# 示例5: 实际工作流程
cat("\n=== 示例5: 实际工作流程 ===\n")
cat("典型的数据分析项目工作流程:\n")
cat("1. 在RStudio中创建新项目或打开现有项目文件夹\n")
cat("2. 运行 setup_analysis_structure() 创建标准目录结构\n")
cat("3. 开始你的数据分析工作\n")
cat("4. 将数据文件放在 data/raw/ 目录\n")
cat("5. 将处理后的数据放在 data/processed/ 目录\n")
cat("6. 将分析脚本放在 scripts/ 目录\n")
cat("7. 将输出结果放在 output/ 目录\n")
cat("8. 将文档放在 docs/ 目录\n")
cat("9. 将配置文件放在 config/ 目录\n")

cat("\n=== 总结 ===\n")
cat("setup_analysis_structure() 函数解决了以下问题:\n")
cat("✓ 不需要指定项目名称（已经在项目目录中）\n")
cat("✓ 不需要指定路径（使用当前工作目录）\n")
cat("✓ 更符合RStudio和Cursor的实际使用场景\n")
cat("✓ 支持覆盖已存在的目录\n")
cat("✓ 提供静默模式选项\n")
cat("✓ 创建标准的分析目录结构\n") 